{"version":3,"sources":["../../src/pages/confirmpopup/confirmpopup.module.ts","../../src/pages/confirmpopup/confirmpopup.ts"],"names":[],"mappings":"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","file":"19.js","sourcesContent":["\r\nimport { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { ConfirmpopupPage } from './confirmpopup';\r\n \r\n@NgModule({\r\n  declarations: [\r\n    ConfirmpopupPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(ConfirmpopupPage),\r\n  ],\r\n  exports: [\r\n    ConfirmpopupPage\r\n  ]\r\n})\r\nexport class ConfirmpopupPageModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/confirmpopup/confirmpopup.module.ts","import { Component} from '@angular/core';\r\nimport { NavController, ViewController, ModalController, NavParams, ToastController, IonicPage} from 'ionic-angular';\r\nimport { AngularFireAuth } from 'angularfire2/auth';\r\n// import { AngularFireDatabase } from 'angularfire2/database';\r\nimport { SignUpService } from '../../services/signup.service';\r\nimport { sendCoordsService } from '../../services/sendCoords.service';\r\n// import { RidetodayPage } from '../ridetoday/ridetoday';\r\n// import { MyridePage } from '../myride/myride';\r\n// import { TabsPage } from '../tabs/tabs';\r\nimport { sendUsersService } from '../../services/sendUsers.service';\r\nimport { geofireService } from '../../services/geofire.services';\r\nimport { instancesService } from '../../services/instances.service';\r\nimport { ListridePage } from '../listride/listride';\r\nimport { Subject } from 'rxjs';\r\n\r\n\r\n@IonicPage()\r\n\r\n@Component({\r\n\tselector: 'page-confirmpopup',\r\n\ttemplateUrl: 'confirmpopup.html'\r\n})\r\nexport class ConfirmpopupPage {\r\n  \r\n\r\n  user:any;\r\n  userDriver:any ;\r\n  locationOrigin:any =[];\r\n  locationDestination:any =[];\r\n  userDriverUid=this.AngularFireAuth.auth.currentUser.uid\r\n  accepted: any;\r\n  infoUser:any = {};\r\n  unsubscribe = new Subject;\r\n  constructor(public navCtrl: NavController,public sendUsersService: sendUsersService, public SignUpService: SignUpService, public sendCoordsService: sendCoordsService,public modalCtrl: ModalController, private AngularFireAuth: AngularFireAuth, public viewCtrl:ViewController,public navParams: NavParams, public geoFireService: geofireService, public instances: instancesService, public toastCtrl: ToastController ) {\r\n      //we get the info of the users with navParams\r\n      this.user= this.navParams.get('user') \r\n      console.log(this.user)\r\n  \r\n         //get origin from driver\r\n      this.sendCoordsService.getOrigin(this.userDriverUid).takeUntil(this.unsubscribe)\r\n      .subscribe( origin => {\r\n        this.locationOrigin = origin;\r\n      })\r\n         //get destination from driver\r\n      this.sendCoordsService.getDestination(this.userDriverUid).takeUntil(this.unsubscribe)\r\n        .subscribe( destination => {\r\n          this.locationDestination = destination;\r\n\t\t})\r\n\t\t\r\n\t\tthis.SignUpService.getMyInfoDriver(this.userDriverUid).takeUntil(this.unsubscribe)\r\n\t\t.subscribe(userDriver => {\r\n\t\t\tthis.userDriver = userDriver;\r\n\t\t\tconsole.log(this.userDriver);\r\n\t\t});\r\n\t\t\r\n\t\tconsole.log('a')\r\n   \r\n    }\r\n\r\n\tacceptUser() {\r\n\t\t//REVISAR\r\n\t\t// setTimeout(()=>{\r\n\t\t// \tthis.sendUsersService.removeUsersOnListRide(this.userDriverUid, this.user.userId);\r\n\r\n\t\t// }, 600)\r\n\t\t\r\n\t\t// setTimeout(()=>{\r\n\t\t// \tthis.sendUsersService.removeUsersOnListRide(this.userDriverUid, this.user.userId);\r\n\r\n\t\t// }, 1100)\r\n\t\tconsole.log('before delete')\r\n\t\tthis.sendUsersService.removeUsersOnListRide(this.userDriverUid, this.user.userId);\r\n\t\tconsole.log('after delete')\r\n\t\tthis.sendUsersService.pushPickingUpUsersOnDrivers(this.userDriverUid, this.user.userId, this.user.origin, this.user.destination, this.user.name, this.user.lastname, this.user.phone);\r\n\t\tthis.sendUsersService.pushDriverOnUsers(this.userDriverUid, this.user.userId, this.locationOrigin, this.locationDestination, this.userDriver.name, this.userDriver.lastname, this.userDriver.phone,this.userDriver.trips.price,this.userDriver.trips.car);\r\n\t\t\tthis.geoFireService.deleteUserListRide(this.userDriverUid, this.user.userId);\r\n\t\t\tthis.geoFireService.deleteUserListRide(this.userDriverUid, this.user.userId);\r\n\r\n\t\t\tthis.instances.turnOntripUsers(this.user.userId);\r\n\t//   this.sendUsersService.removeUsersOnListRide(this.userDriverUid, this.user.userId);\r\n\t  this.instances.turnOntripUsers(this.user.userId);\r\n\t  this.accepted = true;\r\n\t  this.dismiss();\r\n\t\tconst toast = this.toastCtrl.create({\r\n\t\t\tmessage: `¡Haz aceptado a ${this.user.name} en tu viaje!, Acepta otros compañeros y dirigete a Viajes para encontrar su dirección`,\r\n\t\t\tduration: 4500,\r\n\t\t\tposition: 'middle'\r\n\t\t});\r\n\t\ttoast.present();\r\n\r\n      }\r\n  \r\n\r\n\tdismiss() {\r\n\t\tthis.geoFireService.deleteUserListRide(this.userDriverUid, this.user.userId);\r\n\t\tconsole.log('deleted on click')\r\n\t\tthis.viewCtrl.dismiss(this.accepted);\r\n\t\tthis.unsubscribe.next();\r\n\t\tthis.unsubscribe.complete();\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/confirmpopup/confirmpopup.ts"],"sourceRoot":""}