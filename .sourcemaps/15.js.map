{"version":3,"sources":["../../src/pages/onTrip/onTrip.module.ts","../../src/pages/onTrip/onTrip.ts"],"names":[],"mappings":"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","file":"15.js","sourcesContent":["\r\nimport { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { OnTripPage } from './onTrip';\r\n \r\n@NgModule({\r\n  declarations: [\r\n    OnTripPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(OnTripPage),\r\n  ],\r\n  exports: [\r\n    OnTripPage\r\n  ]\r\n})\r\nexport class OnTripPageModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/onTrip/onTrip.module.ts","import { Component, NgZone, ElementRef, ViewChild } from '@angular/core';\r\nimport { NavController, NavParams, AlertController, ToastController, IonicPage, App } from 'ionic-angular';\r\n\r\nimport { sendCoordsService } from '../../services/sendCoords.service';\r\nimport { AngularFireAuth } from 'angularfire2/auth';\r\nimport { SignUpService } from '../../services/signup.service';\r\nimport { authenticationService } from '../../services/driverauthentication.service';\r\nimport { Geolocation } from '@ionic-native/geolocation';\r\nimport * as firebase from 'Firebase';\r\nimport { CallNumber } from '@ionic-native/call-number';\r\nimport { RatetripPage } from '../ratetrip/ratetrip';\r\nimport { sendUsersService } from '../../services/sendUsers.service';\r\n\r\n\r\ndeclare var google; \r\n@IonicPage()\r\n\r\n@Component({\r\n  selector: 'page-ontrip',\r\n  templateUrl: 'onTrip.html'\r\n})\r\nexport class OnTripPage {\r\n  @ViewChild('map') mapElement: ElementRef;\r\n  map: any;\r\n  markers:any;\r\n  driver:any;\r\n  directionsService: any = null;\r\n  directionsDisplay: any = null;\r\n  bounds: any = null;\r\n  myLatLng:any;\r\n  destinationOnTrip:any;\r\n  geocoder:any;\r\n  addressOrigin:any;\r\n  updatelocation:any;\r\n  pickedUpUsers:any = [];\r\n\r\n  useruid=this.AngularFireAuth.auth.currentUser.uid;\r\n\r\n  constructor(public navCtrl: NavController,public alertCtrl: AlertController,public sendUsersService: sendUsersService,public SignupService:SignUpService,public toastCtrl: ToastController,private callNumber: CallNumber,public navParams: NavParams,public SignUpService:SignUpService,private authenticationService:authenticationService, public geolocation: Geolocation,public zone: NgZone, public sendCoordsService: sendCoordsService, private AngularFireAuth: AngularFireAuth, public app: App) {\r\n    \r\n    this.markers = [];\r\n    //we get the info of the users with navParams\r\n    \r\n  \r\n    this.directionsService = new google.maps.DirectionsService();\r\n    this.directionsDisplay = new google.maps.DirectionsRenderer({\r\n      suppressMarkers: true,\r\n  });\r\n    this.bounds = new google.maps.LatLngBounds();\r\n    this.geocoder = new google.maps.Geocoder();\r\n    this.sendUsersService.getPickUpUsers(this.useruid)\r\n    .subscribe( user => {\r\n    \r\n      this.pickedUpUsers = user;\r\n      console.log(this.pickedUpUsers);\r\n      \r\n    });\r\n    this.SignUpService.getMyInfoDriver(this.useruid)\r\n\t\t.subscribe(userDriver => {\r\n\t\t\tthis.driver = userDriver;\r\n\t\t\tconsole.log(this.driver);\r\n    });    \r\n  }\r\n  \r\n  ionViewDidLoad(){ \r\n    this.sendCoordsService.getDestination(this.useruid)\r\n    .subscribe( destination => {\r\n      this.destinationOnTrip = destination;\r\n      console.log(this.destinationOnTrip)\r\n      this.loadMap();\r\n    });\r\n   \r\n  }\r\n \r\n  loadMap(){\r\n\r\n // this gets current position and set the camera of the map and put a marker in your location\r\n    \r\n    this.geolocation.getCurrentPosition({enableHighAccuracy: true}).then((position) => {\r\n\r\n      let latLng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);\r\n \r\n      let mapOptions = {\r\n          center: latLng,\r\n          zoom: 17,\r\n          mapTypeId: google.maps.MapTypeId.ROADMAP,\r\n          \r\n            zoomControl: false,\r\n            mapTypeControl: false,\r\n            scaleControl: false,\r\n            streetViewControl: true,\r\n            rotateControl: false,\r\n            fullscreenControl: false, \r\n            styles: [\r\n              {\r\n                featureType: 'poi',\r\n                elementType: 'labels.icon',\r\n                stylers: [\r\n                  {\r\n                    visibility: 'off'\r\n                  }\r\n                ]\r\n              }\r\n            ]\r\n          \r\n        }\r\n\r\n        this.myLatLng = {lat: position.coords.latitude , lng: position.coords.longitude};\r\n    //creates the map and give options\r\n      this.map = new google.maps.Map(this.mapElement.nativeElement, mapOptions);\r\n      this.geocodeLatLng(latLng)\r\n      this.geocodeAddress(this.destinationOnTrip)\r\n      let marker = new google.maps.Marker({\r\n        map: this.map,\r\n        animation: google.maps.Animation.DROP,\r\n        position: latLng,\r\n        icon: {         url: \"assets/imgs/marker-origin-driver.png\",\r\n        scaledSize: new google.maps.Size(90, 90)    \r\n\r\n      }\r\n        \r\n      });\r\n      this.markers.push(marker);   \r\n      },(err) => {\r\n      console.log(err);    \r\n     });\r\n     //transform the position of the user into an adress\r\n    \r\n     \r\n      \r\n    \r\n   }\r\n    \r\n\r\n    // watch: track the position of the user\r\n  //   let watch = this.geolocation.watchPosition();\r\n  //   watch.subscribe((data) => {\r\n  //   this.deleteMarkers();\r\n  //   this.updatelocation = new google.maps.LatLng(data.coords.latitude,data.coords.longitude);\r\n  //   this.geocodeLatLng(this.updatelocation);\r\n  //   console.log(this.updatelocation)\r\n    \r\n  //   this.sendCoordsService.updateGeolocationOrigin(this.useruid,this.addressOrigin)\r\n    \r\n  //   this.addMarker(this.updatelocation);\r\n  //   this.setMapOnAll(this.map); //nose de esta funcion\r\n  // });   \r\n  \r\n   geocodeAddress(destinationDriver) {\r\n    this.geocoder.geocode({'address':JSON.stringify(destinationDriver)}, (results, status) =>  {\r\n      if (status == 'OK') {\r\n     \r\n        \r\n        var marker = new google.maps.Marker({\r\n          map: this.map,\r\n          position: results[0].geometry.location,\r\n          icon: {         url: \"assets/imgs/marker-destination.png\",\r\n          scaledSize: new google.maps.Size(90, 90)    \r\n  \r\n        }\r\n        });\r\n      \r\n        this.directionsDisplay.setMap(this.map);\r\n        this.calculateRoute(results[0].geometry.location)\r\n      } else {\r\n        alert('Geocode was not successful for the following reason: ' + status);\r\n      }\r\n      \r\n    });\r\n    \r\n  }\r\n  geocodeLatLng(latLng) {\r\n\r\n    this.geocoder.geocode({'location': latLng}, (results, status) => {\r\n      if (status === 'OK') {\r\n        if (results[0]) {\r\n           this.addressOrigin= results[0].formatted_address\r\n        } else {\r\n         alert('No results found');\r\n        }\r\n      } else {\r\n        alert('Geocoder failed due to: ' + status);\r\n      }\r\n                  \r\n  \r\n    });\r\n  } \r\n  calculateRoute(destinationOnTrip){\r\n    //tutorial ngclassroom https://blog.ng-classroom.com/blog/ionic2/directions-google-js-ionic/\r\n\r\n    this.bounds.extend(this.myLatLng);\r\n\r\n    \r\n  \r\n    this.map.fitBounds(this.bounds);\r\n    \r\n    this.directionsService.route({\r\n     origin: new google.maps.LatLng(this.myLatLng.lat, this.myLatLng.lng),\r\n      destination: destinationOnTrip,\r\n      travelMode: google.maps.TravelMode.DRIVING,\r\n      avoidTolls: true\r\n    }, (response, status)=> {\r\n      //render\r\n      if(status === google.maps.DirectionsStatus.OK) {\r\n        this.directionsDisplay.setDirections(response);\r\n      }else{\r\n        alert('Could not display directions due to: ' + status);\r\n      }\r\n      \r\n    });  \r\n    \r\n    \r\n  }\r\n\r\n\r\n   \r\n    addMarker(location) {\r\n      let marker = new google.maps.Marker({\r\n        position: location,\r\n        map: this.map,\r\n        // icon: image\r\n      });\r\n      this.markers.push(marker);\r\n    }\r\n    \r\n    setMapOnAll(map) {\r\n      for (var i = 0; i < this.markers.length; i++) {\r\n        this.markers[i].setMap(map);\r\n      }\r\n    }\r\n    \r\n    clearMarkers() {\r\n      this.setMapOnAll(null);\r\n    }\r\n    \r\n    deleteMarkers() {\r\n      this.clearMarkers();\r\n      this.markers = [];\r\n    }\r\n\r\n    \r\n    endTrip(){\r\n\r\n      //let user rate the trip\r\n      \r\n      this.app.getRootNav().push('RatetripPage', {user:this.driver});\r\n\r\n\r\n      this.pickedUpUsers.forEach(user => {\r\n        \r\n\r\n      //erase chat message for every user\r\n      this.sendCoordsService.eraseChatsUsers(user.userId,this.useruid);  \r\n\r\n      // save trip in every record of every users\r\n      this.sendCoordsService.recordTripOnUser(user.userId,user); \r\n\r\n      // this.sendCoordsService.endTripUserPickingUsers(user.userId);\r\n      this.sendCoordsService.endTripUserPickedUpUsers(user.userId);\r\n      this.sendCoordsService.endTripUserOnTripInstance(user.userId);\r\n      this.sendCoordsService.endTripUserPickupInstance(user.userId);\r\n      this.sendCoordsService.endTripUserDriverListRide(user.userId);      \r\n      this.sendCoordsService.pushOnTripFinalUser(user.userId);\r\n      })\r\n       //Save trip into RecordTrip on User & Driver\r\n      this.sendCoordsService.recordTripOnWaypool(this.driver.trips);\r\n      this.sendCoordsService.recordTripOnDriver(this.useruid,this.driver.trips);        \r\n       //End trip into RecordTrip on User & Driver\r\n      this.sendCoordsService.endTripDriverPickingUsers(this.useruid);\r\n      this.sendCoordsService.endTripDriverPickedUpUsers(this.useruid);\r\n\r\n      \r\n      \r\n      this.presentAlert('Viaje Terminado', '¡No olvides seguirnos en Instagram y Twitter para obtener tips y bonos!','OK');\r\n    \r\n          }\r\n   \r\n    presentToast(message:string,duration,position:string) {     \r\n      const toast = this.toastCtrl.create({\r\n        message: message,\r\n        duration: duration,\r\n        position:position\r\n      });\r\n      toast.present();\r\n    }\r\n    presentAlert(title:string,text:string,button:string) {\r\n      let alert = this.alertCtrl.create({\r\n        title: title,\r\n        subTitle: text,\r\n        buttons: [button]\r\n      });\r\n      alert.present();\r\n    }\r\n    help(){\r\n      const toast = this.toastCtrl.create({\r\n        message: 'En esta página podrás dirigirte hacia la universidad y ver en el mapa el camino que puedes tomar, cuando hayas llegado presiona el botón finalizar viaje y cuentanos tu experiencia con Waypool.',\r\n        showCloseButton:true,\r\n        closeButtonText: 'OK',\r\n        position:'top'\r\n           });\r\n      toast.present();\r\n    }\r\n  }\r\n    \r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/onTrip/onTrip.ts"],"sourceRoot":""}