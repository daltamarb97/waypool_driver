{"version":3,"sources":["../../src/pages/add-schedule/add-schedule.module.ts","../../src/pages/add-schedule/add-schedule.ts"],"names":[],"mappings":"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","file":"30.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AddSchedulePage } from './add-schedule';\n\n@NgModule({\n  declarations: [\n    AddSchedulePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(AddSchedulePage),\n  ],\n  exports: [\n    AddSchedulePage\n  ]\n})\nexport class AddSchedulePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/add-schedule/add-schedule.module.ts","import { Component, ViewChild, ElementRef, Renderer } from '@angular/core';\nimport { NavController, ViewController, ModalController, NavParams, Tabs, AlertController, App, IonicPage } from 'ionic-angular';\nimport { AngularFireAuth } from 'angularfire2/auth';\nimport { AngularFireDatabase } from 'angularfire2/database';\nimport { SignUpService } from '../../services/signup.service';\nimport { sendCoordsService } from '../../services/sendCoords.service';\n\nimport { sendUsersService } from '../../services/sendUsers.service';\nimport { priceService } from '../../services/price.service';\nimport { geofireService } from '../../services/geofire.services';\nimport { Subscription, Subject, Subscriber } from 'rxjs';\nimport * as moment from 'moment';\nimport { MetricsService } from '../../services/metrics.service';\nimport { instancesService } from '../../services/instances.service';\n\n \n\n@IonicPage()\n@Component({\n  selector: 'page-add-schedule',\n  templateUrl: 'add-schedule.html',\n})\nexport class AddSchedulePage {\n  @ViewChild('house',{read:ElementRef}) house;\n  @ViewChild('work',{read:ElementRef}) work;\n  accepted:any;\n  imageHouseToWork:boolean = false;\n  imageWorkToHouse:boolean = false;\n  button1WasntTapped:boolean = true;\n  button2WasntTapped:boolean = true;\n  textMessage: string;\n  startHour:any;\n  userId: any;\n  geofireType:string;\n  imageURL:any;\n  userInfo:any;\n  constructor(public navCtrl: NavController, public navParams: NavParams, public viewCtrl: ViewController,public renderer: Renderer ,public alertCtrl: AlertController, public signUpService: SignUpService, public angularFireAuth: AngularFireAuth, private instances: instancesService, private afDB: AngularFireDatabase) {\n  \n    this.userId = this.angularFireAuth.auth.currentUser.uid;\n\n    this.afDB.database.ref(this.signUpService.userPlace + '/drivers/' + this.userId).once('value').then((snap)=>{\n      this.userInfo = snap.val();\n    })\n  }\n\n\n  dismiss(){\n    this.viewCtrl.dismiss(this.accepted);\n\n  }\n\n  \n  selectImageHouse(){\n    // this is just to change the css\n    this.renderer.setElementStyle(this.house.nativeElement,'border-width','3px')\n    this.renderer.setElementStyle(this.house.nativeElement,'border-style','solid')\n    this.renderer.setElementStyle(this.house.nativeElement,'border-color','green')\n  \n    this.renderer.setElementStyle(this.work.nativeElement,'border-width','0px')\n    this.imageURL = 'assets/imgs/workToHouse.png';\n\n    this.textMessage = 'Casa'\n    this.geofireType = 'destination';\n    this.imageHouseToWork = true;\n    this.imageWorkToHouse = false;\n  }\n  selectImageWork(){\n    // this is just to change the css\n    this.renderer.setElementStyle(this.work.nativeElement,'border-width','3px')\n    this.renderer.setElementStyle(this.work.nativeElement,'border-style','solid')\n    this.renderer.setElementStyle(this.work.nativeElement,'border-color','green')\n  \n    this.renderer.setElementStyle(this.house.nativeElement,'border-width','0px')\n    this.textMessage = 'Trabajo';\n    this.geofireType = 'origin';\n    this.imageURL = 'assets/imgs/houseToWork.png';\n    \n    this.imageHouseToWork = false;\n    this.imageWorkToHouse = true;\n  \n  }\n \n\n  confirm(){\n    console.log(this.imageHouseToWork);\n    console.log(this.imageWorkToHouse);\n\n      \n        if(this.imageHouseToWork === true  || this.imageWorkToHouse === true){ \n          if(this.startHour === undefined || this.startHour === null){\n            const alert = this.alertCtrl.create({\n              title: 'Debes seleccionar una hora de partida',\n              subTitle: '¿A qué hora sales del trabajo o de tu casa?',\n              buttons: ['OK']\n            });\n            alert.present();\n          }else{\n            const alert = this.alertCtrl.create({\n              title: '¿vas a tu ' + this.textMessage + ' a las ' + this.startHour + '?',\n              buttons: [\n                {\n                  text: 'Confirmo este horario',\n                  handler: () => {\n                    this.afDB.database.ref('allCities/' + this.userInfo.city + '/allPlaces/' + this.userInfo.company + '/zones').once('value').then((snap)=>{\n                      let obj = snap.val();\n\n                      this.afDB.database.ref('allSchedules/' +this.userId).push({\n                        hour: this.startHour, \n                        type: this.geofireType,\n                        description: this.textMessage,\n                        image: this.imageURL\n                    }).then((snap1)=>{\n                        this.afDB.database.ref('allSchedules/' +this.userId + '/' + snap1.key).update({\n                            key: snap1.key                              \n                        })\n                         \n                      Object.getOwnPropertyNames(obj).forEach((keyZ)=>{\n                        // this.signUpService.pushSchedule(obj[key], this.userId, this.startHour, this.geofireType, this.textMessage, this.imageURL );\n                        \n\n                            this.afDB.database.ref(obj[keyZ] + '/drivers/'+this.userId+'/schedule/' + snap1.key).update({\n                              hour: this.startHour, \n                              type: this.geofireType,\n                              description: this.textMessage,\n                              image: this.imageURL,\n                              key: snap1.key\n                          })\n\n                                 \n                             \n                      })\n                      })\n                    }).then(()=>{\n                      this.viewCtrl.dismiss();\n                    })\n                  }\n                }\n              ]\n            });\n            alert.present();\n          }\n          \n        }else{\n          const alert = this.alertCtrl.create({\n            title: 'Debes seleccionar una opción',\n            subTitle: '¿a esta hora vas a tu casa o a tu trabajo?',\n            buttons: ['OK']\n          });\n          alert.present();\n        }\n      \n    \n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/add-schedule/add-schedule.ts"],"sourceRoot":""}