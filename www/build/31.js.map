{"version":3,"sources":["../../src/pages/add-schedule/add-schedule.module.ts","../../src/pages/add-schedule/add-schedule.ts"],"names":[],"mappings":"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","file":"31.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { AddSchedulePage } from './add-schedule';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AddSchedulePage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(AddSchedulePage),\r\n  ],\r\n  exports: [\r\n    AddSchedulePage\r\n  ]\r\n})\r\nexport class AddSchedulePageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/add-schedule/add-schedule.module.ts","import { Component, ViewChild, ElementRef, Renderer } from '@angular/core';\r\nimport { NavController, ViewController, ModalController, NavParams, Tabs, AlertController, App, IonicPage } from 'ionic-angular';\r\nimport { AngularFireAuth } from 'angularfire2/auth';\r\nimport { AngularFireDatabase } from 'angularfire2/database';\r\nimport { SignUpService } from '../../services/signup.service';\r\nimport { instancesService } from '../../services/instances.service';\r\n\r\n \r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-add-schedule',\r\n  templateUrl: 'add-schedule.html',\r\n})\r\nexport class AddSchedulePage {\r\n  @ViewChild('house',{read:ElementRef}) house;\r\n  @ViewChild('work',{read:ElementRef}) work;\r\n  accepted:any;\r\n  imageHouseToWork:boolean = false;\r\n  imageWorkToHouse:boolean = false;\r\n  button1WasntTapped:boolean = true;\r\n  button2WasntTapped:boolean = true;\r\n  textMessage: string;\r\n  startHour:any;\r\n  userId: any;\r\n  geofireType:string;\r\n  imageURL:any;\r\n  userInfo:any;\r\n  constructor(public navCtrl: NavController, public navParams: NavParams, public viewCtrl: ViewController,public renderer: Renderer ,public alertCtrl: AlertController, public signUpService: SignUpService, public angularFireAuth: AngularFireAuth, private instances: instancesService, private afDB: AngularFireDatabase) {\r\n  \r\n    this.userId = this.angularFireAuth.auth.currentUser.uid;\r\n\r\n    this.afDB.database.ref(this.signUpService.userPlace + '/drivers/' + this.userId).once('value').then((snap)=>{\r\n      this.userInfo = snap.val();\r\n    })\r\n  }\r\n\r\n\r\n  dismiss(){\r\n    this.viewCtrl.dismiss(this.accepted);\r\n\r\n  }\r\n\r\n  \r\n  selectImageHouse(){\r\n    // this is just to change the css\r\n    this.renderer.setElementStyle(this.house.nativeElement,'border-width','3px')\r\n    this.renderer.setElementStyle(this.house.nativeElement,'border-style','solid')\r\n    this.renderer.setElementStyle(this.house.nativeElement,'border-color','green')\r\n  \r\n    this.renderer.setElementStyle(this.work.nativeElement,'border-width','0px')\r\n    this.imageURL = 'assets/imgs/workToHouse.png';\r\n\r\n    this.textMessage = 'Casa'\r\n    this.geofireType = 'destination';\r\n    this.imageHouseToWork = true;\r\n    this.imageWorkToHouse = false;\r\n  }\r\n  selectImageWork(){\r\n    // this is just to change the css\r\n    this.renderer.setElementStyle(this.work.nativeElement,'border-width','3px')\r\n    this.renderer.setElementStyle(this.work.nativeElement,'border-style','solid')\r\n    this.renderer.setElementStyle(this.work.nativeElement,'border-color','green')\r\n  \r\n    this.renderer.setElementStyle(this.house.nativeElement,'border-width','0px')\r\n    this.textMessage = 'Trabajo';\r\n    this.geofireType = 'origin';\r\n    this.imageURL = 'assets/imgs/houseToWork.png';\r\n    \r\n    this.imageHouseToWork = false;\r\n    this.imageWorkToHouse = true;\r\n  \r\n  }\r\n \r\n\r\n  confirm(){\r\n    console.log(this.imageHouseToWork);\r\n    console.log(this.imageWorkToHouse);\r\n\r\n      \r\n        if(this.imageHouseToWork === true  || this.imageWorkToHouse === true){ \r\n          if(this.startHour === undefined || this.startHour === null){\r\n            const alert = this.alertCtrl.create({\r\n              title: 'Debes seleccionar una hora de partida',\r\n              subTitle: '¿A qué hora sales del trabajo o de tu casa?',\r\n              buttons: ['OK']\r\n            });\r\n            alert.present();\r\n          }else{\r\n            const alert = this.alertCtrl.create({\r\n              title: '¿vas a tu ' + this.textMessage + ' a las ' + this.startHour + '?',\r\n              buttons: [\r\n                {\r\n                  text: 'Confirmo este horario',\r\n                  handler: () => {\r\n                    this.afDB.database.ref('allCities/' + this.userInfo.city + '/allPlaces/' + this.userInfo.company + '/zones').once('value').then((snap)=>{\r\n                      let obj = snap.val();\r\n\r\n                      this.afDB.database.ref('allSchedules/' +this.userId).push({\r\n                        hour: this.startHour, \r\n                        type: this.geofireType,\r\n                        description: this.textMessage,\r\n                        image: this.imageURL\r\n                    }).then((snap1)=>{\r\n                        this.afDB.database.ref('allSchedules/' +this.userId + '/' + snap1.key).update({\r\n                            key: snap1.key                              \r\n                        })\r\n                         \r\n                      Object.getOwnPropertyNames(obj).forEach((keyZ)=>{\r\n\r\n                          if(obj[keyZ] === 2 || obj[keyZ] === 3 || obj[keyZ] === 4 || obj[keyZ] === 5 || obj[keyZ] === 6 || obj[keyZ] === 1 || obj[keyZ] === 7 || obj[keyZ] === 8 || obj[keyZ] === 9 || obj[keyZ] === 10){\r\n\r\n                          }else{\r\n                            this.afDB.database.ref(obj[keyZ] + '/drivers/'+this.userId+'/schedule/' + snap1.key).update({\r\n                              hour: this.startHour, \r\n                              type: this.geofireType,\r\n                              description: this.textMessage,\r\n                              image: this.imageURL,\r\n                              key: snap1.key\r\n                          })\r\n                          }              \r\n                        })\r\n                      })\r\n                    }).then(()=>{\r\n                      this.viewCtrl.dismiss();\r\n                    })\r\n                  }\r\n                }\r\n              ]\r\n            });\r\n            alert.present();\r\n          }\r\n          \r\n        }else{\r\n          const alert = this.alertCtrl.create({\r\n            title: 'Debes seleccionar una opción',\r\n            subTitle: '¿a esta hora vas a tu casa o a tu trabajo?',\r\n            buttons: ['OK']\r\n          });\r\n          alert.present();\r\n        }\r\n      \r\n    \r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/add-schedule/add-schedule.ts"],"sourceRoot":""}