{"version":3,"sources":["../../src/pages/pickup/pickup.ts","../../src/pages/pickup/pickup.module.ts"],"names":[],"mappings":"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","file":"13.js","sourcesContent":["import { Component, NgZone, ElementRef, ViewChild } from '@angular/core';\nimport { NavController, NavParams, AlertController, ToastController, IonicPage } from 'ionic-angular';\n\nimport { sendCoordsService } from '../../services/sendCoords.service';\nimport { AngularFireAuth } from 'angularfire2/auth';\nimport { SignUpService } from '../../services/signup.service';\nimport { authenticationService } from '../../services/driverauthentication.service';\nimport { Geolocation } from '@ionic-native/geolocation';\nimport * as firebase from 'Firebase';\nimport { CallNumber } from '@ionic-native/call-number';\nimport * as moment from 'moment';\nimport { geofireService } from '../../services/geofire.services';\nimport { TripsService } from '../../services/trips.service';\n\ndeclare var google; \n@IonicPage()\n@Component({\n  selector: 'page-pickup',\n  templateUrl: 'pickup.html'\n})\nexport class PickupPage {\n  @ViewChild('map') mapElement: ElementRef;\n  map: any;\n  markers:any;\n  user:any;\n  directionsService: any = null;\n  directionsDisplay: any = null;\n  bounds: any = null;\n  myLatLng:any;\n  destinationOnTrip:any;\n  geocoder:any;\n  addressOrigin:any;\n  updatelocation:any;\n  useruid=this.AngularFireAuth.auth.currentUser.uid;\n  userDriver:any;\n  userFirebase:any;\n  keyTrip:string;\n  constructor(public navCtrl: NavController,public alertCtrl: AlertController,public TripsService:TripsService,public toastCtrl: ToastController,private callNumber: CallNumber,public navParams: NavParams,public SignUpService:SignUpService,private authenticationService:authenticationService, public geolocation: Geolocation,public zone: NgZone, public sendCoordsService: sendCoordsService, private AngularFireAuth: AngularFireAuth) {\n    this.markers = [];\n    //we get the info of the users with navParams\n    this.user= this.navParams.get('user') \n    this.keyTrip= this.navParams.get('keyTrip') \n    console.log(this.user)\n    console.log(this.keyTrip)\n\n    this.directionsService = new google.maps.DirectionsService();\n    this.directionsDisplay = new google.maps.DirectionsRenderer({\n      suppressMarkers: true,\n  });\n    this.bounds = new google.maps.LatLngBounds();\n    this.geocoder = new google.maps.Geocoder();\n\n    this.SignUpService.getMyInfoDriver(this.SignUpService.userUniversity, this.useruid)\n\t\t.subscribe(userDriver => {\n\t\t\tthis.userDriver = userDriver;\n\t\t\tconsole.log(this.userDriver);\n\t\t});\n    this.SignUpService.getInfoUser(this.SignUpService.userUniversity, this.user.userId)\n\t\t.subscribe(userFirebase => {\n      //modificar\n      //get info user and observe if user has not canceled\n      this.userFirebase = userFirebase;\n\n    // if(this.userFirebase.trips.onTrip === true ){\n\n    // } else {\n    //   //if canceled go back to myRidePage\n    //   this.navCtrl.pop();\n    //   const toast = this.toastCtrl.create({\n    //     message: `El estudiante ${this.user.name} que ibas a recoger te ha cancelado`,\n    //     showCloseButton:true,\n    //     closeButtonText: 'OK',\n    //     position:'middle'\n    //        });\n    //   toast.present();\n    // }\n\t\t\t\n\t\t});\n  }\n  ionViewDidLoad(){\n    \n    this.loadMap();\n  \n  }\n \n  loadMap(){\n\n // this gets current position and set the camera of the map and put a marker in your location\n    \n    this.geolocation.getCurrentPosition({enableHighAccuracy: true}).then((position) => {\n\n      let latLng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);\n \n      let mapOptions = {\n          center: latLng,\n          zoom: 17,\n          mapTypeId: google.maps.MapTypeId.ROADMAP,\n          \n            zoomControl: false,\n            mapTypeControl: false,\n            scaleControl: false,\n            streetViewControl: false,\n            rotateControl: false,\n            fullscreenControl: false,\n           \n            styles: [\n              {\n                featureType: 'poi',\n                elementType: 'labels.icon',\n                stylers: [\n                  {\n                    visibility: 'off'\n                  }\n                ]\n              }\n            ]\n          \n        }\n\n        this.myLatLng = {lat: position.coords.latitude , lng: position.coords.longitude};\n    //creates the map and give options\n      this.map = new google.maps.Map(this.mapElement.nativeElement, mapOptions);\n      this.geocodeLatLng(latLng)\n\n      let marker = new google.maps.Marker({\n        map: this.map,\n        animation: google.maps.Animation.DROP,\n        position: latLng,\n        icon: {         url: \"assets/imgs/marker-origin-driver.png\",\n        scaledSize: new google.maps.Size(90, 90)    \n\n      }\n      \n        \n      });\n      this.markers.push(marker);   \n      },(err) => {\n      console.log(err);    \n     });\n     //transform the position of the user into an adress\n    this.geocodeAddress(this.user.origin)\n\n    // watch: track the position of the user\n  //   let watch = this.geolocation.watchPosition();\n  //   watch.subscribe((data) => {\n  //   this.deleteMarkers();\n  //   this.updatelocation = new google.maps.LatLng(data.coords.latitude,data.coords.longitude);\n  //   this.geocodeLatLng(this.updatelocation);\n  //   console.log(this.updatelocation)\n    \n  //   this.sendCoordsService.updateGeolocationOrigin(this.useruid,this.addressOrigin)\n    \n  //   this.addMarker(this.updatelocation);\n  //   this.setMapOnAll(this.map); //nose de esta funcion\n  // });   \n  }\n   geocodeAddress(userOrigin) {\n    this.geocoder.geocode({'address':JSON.stringify(userOrigin)}, (results, status) =>  {\n      if (status == 'OK') {\n     \n        \n        var marker = new google.maps.Marker({\n          map: this.map,\n          position: results[0].geometry.location,\n          icon: {         url: \"assets/imgs/marker-destination2.png\",\n          scaledSize: new google.maps.Size(90, 90)     \n        }\n        });\n      \n        this.directionsDisplay.setMap(this.map);\n        this.calculateRoute(results[0].geometry.location)\n      } else {\n        alert('Geocode was not successful for the following reason: ' + status);\n      }\n      \n    });\n    \n  }\n  geocodeLatLng(latLng) {\n\n    this.geocoder.geocode({'location': latLng}, (results, status) => {\n      if (status === 'OK') {\n        if (results[0]) {\n           this.addressOrigin= results[0].formatted_address\n        } else {\n         alert('No results found');\n        }\n      } else {\n        alert('Geocoder failed due to: ' + status);\n      }\n                  \n  \n    });\n  } \n  calculateRoute(destinationOnTrip){\n    //tutorial ngclassroom https://blog.ng-classroom.com/blog/ionic2/directions-google-js-ionic/\n\n    this.bounds.extend(this.myLatLng);\n\n    \n  \n    this.map.fitBounds(this.bounds);\n    \n    this.directionsService.route({\n     origin: new google.maps.LatLng(this.myLatLng.lat, this.myLatLng.lng),\n      destination: destinationOnTrip,\n      travelMode: google.maps.TravelMode.DRIVING,\n      avoidTolls: true\n    }, (response, status)=> {\n      //render\n      if(status === google.maps.DirectionsStatus.OK) {\n        this.directionsDisplay.setDirections(response);\n      }else{\n        alert('Could not display directions due to: ' + status);\n      }\n      \n    });  \n    \n    \n  }\n\n\n   \n    addMarker(location) {\n      let marker = new google.maps.Marker({\n        position: location,\n        map: this.map,\n        // icon: image\n      });\n      this.markers.push(marker);\n    }\n    \n    setMapOnAll(map) {\n      for (var i = 0; i < this.markers.length; i++) {\n        this.markers[i].setMap(map);\n      }\n    }\n    \n    clearMarkers() {\n      this.setMapOnAll(null);\n    }\n    \n    deleteMarkers() {\n      this.clearMarkers();\n      this.markers = [];\n    }\n    \n    notifyDriver(){\n      this.presentToast(`Se le ha notificado a ${this.user.name} que ya llegaste`,3000,'top');\n    }\n\n\n\n    PickUp(){\n      \n      this.TripsService.eliminatePendingUsers(this.SignUpService.userUniversity, this.keyTrip,this.useruid,this.user.userId);\n\n      // this.sendCoordsService.pushPriceOnUser(this.useruid,this.user.userId,this.userDriver.trips.price)\n\n      this.TripsService.pickUp(this.SignUpService.userUniversity, this.keyTrip,this.useruid,this.user.userId,this.user);\n      this.presentToast(`Acabas de recoger a ${this.user.name}, ¡Salúdalo por nosotros!`,4000,'top');\n      // this.sendCoordsService.pickUpInstance(this.user.userId);\n      // moment.locale('es');   \n      // let currDate = moment().format('MMMM Do YYYY, h:mm:ss a');\n      //   this.sendCoordsService.timeOfPickedUpDriver(this.useruid,currDate,this.user.userId)\n      //   this.sendCoordsService.timeOfPickedUpUser(this.user.userId,currDate)\n\n    }\n    \n    callUser(){\n    \n      this.callNumber.isCallSupported()\n    .then((response) => {\n    if (response == true) {\n      this.callNumber.callNumber(this.user.phone, true)\n      .then(res => console.log('Launched dialer!', res)) //si no es necesario esta promesa, eliminarla\n      .catch(err => console.log('Error launching dialer', err));\n    }\n    else {\n        this.presentAlert('Error','No se pudo generar la llamada','ok');\n          }\n      });\n    }\n    presentToast(message:string,duration,position:string) {     \n      const toast = this.toastCtrl.create({\n        message: message,\n        duration: duration,\n        position:position\n      });\n      toast.present();\n    }\n    presentAlert(title:string,text:string,button:string) {\n      let alert = this.alertCtrl.create({\n        title: title,\n        subTitle: text,\n        buttons: [button]\n      });\n      alert.present();\n    }\n    help(){\n      const toast = this.toastCtrl.create({\n        message: 'En esta página podrás ver mejor la dirección que de tu compañer@s a través de un mapa, cuando hayas llegado al lugar donde está tu compañer@, cada vez que presiones el botón \"Ya llegué\" se le enviará una notificación al estudiante de que ya llegaste. ¡Que disfruten el viaje!',\n        showCloseButton:true,\n        closeButtonText: 'OK',\n        position:'top'\n           });\n      toast.present();\n    }\n\n    more(){\n      \n    }\n  }\n    \n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/pickup/pickup.ts","\nimport { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { PickupPage } from './pickup';\n \n@NgModule({\n  declarations: [\n    PickupPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(PickupPage),\n  ],\n  exports: [\n    PickupPage\n  ]\n})\nexport class PickupPageModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/pickup/pickup.module.ts"],"sourceRoot":""}