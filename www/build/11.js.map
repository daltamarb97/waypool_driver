{"version":3,"sources":["../../src/pages/signup/signup.module.ts","../../src/pages/signup/signup.ts"],"names":[],"mappings":"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","file":"11.js","sourcesContent":["\r\nimport { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { SignupPage } from './signup';\r\n \r\n@NgModule({\r\n  declarations: [\r\n    SignupPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(SignupPage),\r\n  ],\r\n  exports: [\r\n    SignupPage\r\n  ]\r\n})\r\nexport class SignupPageModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/signup/signup.module.ts","\r\nimport { Component, ViewChild } from '@angular/core';\r\n\r\n\r\nimport { NavController, NavParams, IonicPage, App } from 'ionic-angular';\r\nimport { LoginPage } from '../login/login';\r\n// import { VerificationPage } from '../verification/verification';\r\n\r\n// import { AngularFireDatabase } from '@angular/fire/database';\r\nimport { FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport { authenticationService } from '../../services/driverauthentication.service';\r\nimport { SignUpService } from '../../services/signup.service';\r\nimport { AlertController } from 'ionic-angular';\r\nimport { Content } from 'ionic-angular';\r\nimport { AngularFireAuth } from 'angularfire2/auth';\r\nimport { WindowService } from '../../services/window.service';\r\n// import * as firebase from 'firebase';\r\nimport * as firebase from 'firebase';\r\nimport { Subject } from 'rxjs';\r\nimport { AngularFireDatabase } from 'angularfire2/database';\r\n\r\ndeclare var google;\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-signup',\r\n  templateUrl: 'signup.html'\r\n})\r\n\r\nexport class SignupPage {\r\n\r\n    @ViewChild(Content) content: Content;\r\n    user:any ={};\r\n    car:any={};\r\n    tokenId:any = '';\r\n    userId:any = '';\r\n    isReadonly = true;\r\n    private signupGroup: FormGroup;\r\n\r\n    //variables linked among them \r\n    cityVar:any;\r\n    cities = [];\r\n    showReadonly:boolean = true;\r\n    // onlyEmail:any;\r\n    arrayEmails = [];\r\n    company:any;\r\n    windowRef:any;\r\n    verificationCode:string;\r\n    unsubscribe = new Subject;\r\n    email:any;\r\n    geocoder: any\r\n\r\n    emailStringVerification:any;\r\n    rightEmailOnDatabase:any;\r\n    zones = [];\r\n    forLoopsCompleted:any = 0;\r\n    companyIdentified:boolean = false;\r\n\r\n  constructor(public navCtrl: NavController, private formBuilder: FormBuilder, private authenticationService: authenticationService, private SignUpService: SignUpService, public  alertCtrl: AlertController, private AngularFireAuth: AngularFireAuth, public navParams: NavParams, public windowService: WindowService, private app: App, private afDB: AngularFireDatabase) {\r\n    this.signupGroup = this.formBuilder.group({\r\n        name: [\"\", Validators.required],\r\n        lastname: [\"\", Validators.required],\r\n        email: [\"\", Validators.required],\r\n        password: [\"\", Validators.required],\r\n        passwordconf: [\"\", Validators.required],\r\n        phone: [\"\", Validators.required],\r\n        carModel: [\"\", Validators.required],\r\n        plateNumber: [\"\", Validators.required],\r\n        color: [\"\", Validators.required],\r\n        city: [\"\", Validators.required],\r\n        isChecked:[true, Validators.required]\r\n    })\r\n\r\n    this.geocoder = new google.maps.Geocoder;\r\n\r\n\r\n    // this.SignUpService.pushEmails('uninorte', '@uninorte.edu.co');\r\n    // this.SignUpService.pushEmails('uninorte', '@jhggh.edu.co');\r\n\r\n    this.SignUpService.getAllCities().takeUntil(this.unsubscribe)\r\n    .subscribe(cities => {\r\n        this.cities = cities;\r\n        console.log(this.cities);\r\n        \r\n    })\r\n\r\n  }\r\n\r\n  \r\n\r\n  onChange(){\r\n    this.arrayEmails = [];\r\n    this.afDB.database.ref('allCities/' + this.cityVar + '/allPlaces').once('value').then((snap)=>{\r\n        let obj = snap.val();\r\n\r\n        Object.getOwnPropertyNames(obj).forEach((key)=>{\r\n            this.arrayEmails.push(obj[key].email);\r\n            console.log(this.arrayEmails);\r\n            \r\n            \r\n        })\r\n    })  \r\n}\r\n\r\nnoCompanyIdentified(numberToExecute){\r\n    ++this.forLoopsCompleted;\r\n    if(this.forLoopsCompleted === numberToExecute){\r\n        if(this.companyIdentified === false){\r\n            const alert = this.alertCtrl.create({\r\n                title: 'El correo que ingresaste no concuerda con el de ninguna empresa de la red de Waypool',\r\n                subTitle: 'Revisa si escribiste el correo bien o si tu empresa no está en Waypool, envianos un correo a team@waypooltech.com',\r\n                buttons: ['OK']\r\n              });\r\n              alert.present(); \r\n        }\r\n        \r\n    }\r\n}\r\n\r\n\r\n    scrolling(){\r\n        this.content.scrollTo(30, 0);\r\n    };\r\n\r\n\r\n    login(){\r\n        this.navCtrl.setRoot('LoginPage');\r\n    }\r\n     \r\n    verification(){\r\n        this.forLoopsCompleted = 0;\r\n        this.companyIdentified = false;\r\n        var count = this.arrayEmails.length;\r\n        for(var i=0; i<count; i++){\r\n\r\n            this.emailStringVerification = this.email.indexOf(this.arrayEmails[i]);\r\n            console.log(this.emailStringVerification);\r\n            if(this.emailStringVerification > -1){\r\n                this.companyIdentified = true;\r\n                this.rightEmailOnDatabase = this.arrayEmails[i];\r\n                this.afDB.database.ref('allCities/' + this.cityVar + '/allPlaces').once('value').then((snap)=>{\r\n                    let obj = snap.val();\r\n                    Object.getOwnPropertyNames(obj).forEach((key)=>{ \r\n                        if(obj[key].email === this.rightEmailOnDatabase){\r\n                            console.log(`la empresa es ${obj[key].name}`);  \r\n                            this.company = obj[key].name;\r\n                                obj[key].zones.forEach(zone => {\r\n                                    this.zones.push(zone);\r\n                                });                                  \r\n                            \r\n                            \r\n                            \r\n                        }\r\n                    })\r\n                }).then(()=>{\r\n\r\n                    if(!this.signupGroup.controls['isChecked'].value === true ){\r\n\r\n                        const alert = this.alertCtrl.create({\r\n                            title: 'No aceptaste nuestros términos y condiciones',\r\n                            subTitle: 'Debes estar de acuerdo con nustros términos y condiciones para usar Waypool',\r\n                            buttons: ['OK']\r\n                          });\r\n                          alert.present(); \r\n                \r\n                        }else{\r\n                            let userName = this.signupGroup.controls['name'].value;\r\n                            let userLastName = this.signupGroup.controls['lastname'].value;\r\n                            let userPhone = this.signupGroup.controls['phone'].value;\r\n                            let userEmail = this.signupGroup.controls['email'].value \r\n                            let userPassword = this.signupGroup.controls['password'].value;\r\n                            let userCarModel = this.signupGroup.controls['carModel'].value;\r\n                            let userPlateNumber = this.signupGroup.controls['plateNumber'].value;\r\n                            let usercarColor = this.signupGroup.controls['color'].value;\r\n\r\n                \r\n                          this.car = {\r\n                            carModel: userCarModel,\r\n                            plateNumber:userPlateNumber,\r\n                            color:usercarColor\r\n                          }\r\n                \r\n                          // saving data in variable\r\n                          \r\n                            this.user = {\r\n                                name: userName,\r\n                                lastname: userLastName,\r\n                                email: userEmail,\r\n                                phone: '+57'+userPhone,\r\n                                createdBy: 'driver',\r\n                                company: this.company,\r\n                                city: this.cityVar\r\n                            };\r\n                            \r\n                            \r\n                        // this.SignUpService.userPlace = this.userPlace;\r\n                        \r\n                          if(this.signupGroup.controls['password'].value === this.signupGroup.controls['passwordconf'].value){\r\n                            this.authenticationService.registerWithEmail(userEmail, userPassword).then(() =>{\r\n                                if(!this.user.userId){\r\n                                    this.AngularFireAuth.auth.onAuthStateChanged((user)=>{\r\n                                        if(user){\r\n                                                   user.getIdToken().then((token)=>{\r\n                                                   this.user.tokenId = token;\r\n                    \r\n                                                })\r\n                                             if(!this.user.userId){\r\n                                                this.user.userId = user.uid;\r\n                                            }\r\n                \r\n                                            \r\n                                                this.zones.forEach(zone => {\r\n                                                    this.SignUpService.saveUser(zone, this.user);\r\n\r\n                                                })\r\n                                            \r\n                                           \r\n                                            \r\n                                            this.afDB.database.ref('allCities/'+ this.cityVar + '/allPlaces/' + this.company + '/location').once('value').then((snap)=>{\r\n                                                console.log(snap.val());\r\n                                                \r\n                                                \r\n                                                    snap.val().forEach(location => {\r\n                                                        this.SignUpService.setFixedLocationCoordinates(location.zone, this.user.userId, location.lat, location.lng );\r\n                                                        this.SignUpService.setFixedLocationName(location.zone, this.user.userId, location.name);  \r\n                                                        this.SignUpService.addCarProfile(location.zone, this.user.userId,this.car);   \r\n                                                        this.SignUpService.addPlaceZone(location.zone, this.user.userId);  \r\n                                                    }) \r\n                                                \r\n                                                \r\n                                            }).then(()=>{\r\n                                                this.SignUpService.saveUserInAllUsers(this.company, this.user.userId, this.cityVar);\r\n                                            })\r\n                                            \r\n                                            \r\n                                            \r\n                                            //send text message with code - LATER ON\r\n                                            // this.sendVerificationCode(this.user.userId);\r\n                                            // this.app.getRootNav().push('LoginPage');\r\n                \r\n                \r\n                                        }else{\r\n                                            console.log('there is no user');\r\n                                        }\r\n                                    })\r\n                                };\r\n                    \r\n                                //sending email verification and verifying whether email is verified or not\r\n                                this.AngularFireAuth.auth.onAuthStateChanged((user)=>{\r\n                                    if(user){\r\n                                        if(user.emailVerified == false){\r\n                                            user.sendEmailVerification();\r\n                                            const alert = this.alertCtrl.create({\r\n                                                title: '¡REGISTRO EXITOSO!',\r\n                                                subTitle: 'En los próximos minutos te enviaremos un link de verificación a tu email',\r\n                                                buttons: [\r\n                                                    {\r\n                                                        text: 'OK',\r\n                                                        handler: () => {\r\n                                                            \r\n                                                                this.afDB.database.ref('allCities/'+ this.cityVar + '/allPlaces/' + this.company + '/zones').once('value').then((snap)=>{\r\n                                                                    this.app.getRootNav().push('CarRegistrationLoginPage', {defaultZone: snap.val()[0] });  \r\n                                                                })\r\n                                                            \r\n                                                        }\r\n                                                      }\r\n                                                ]\r\n                                            });\r\n                                            alert.present();\r\n                                        console.log(\"verification email has been sent\");\r\n                                        }else{\r\n                                            console.log(\"verification email has not been sent or the email is already verified\");\r\n                                        }\r\n                                    }else{\r\n                                        console.log('there is no user');\r\n                                    }\r\n                                }) \r\n                            }).catch((error)=>{\r\n                                if(error.code === \"auth/email-already-in-use\"){\r\n                                    const alert = this.alertCtrl.create({\r\n                                        title: 'ya existe una cuenta con este correo',\r\n                                        subTitle: 'Si ya te registraste en WAYPOOL, sólo debes iniciar sesión con los datos con los que te registraste. También puedes estar registrandote con un correo ya existente',\r\n                                        buttons: ['OK']\r\n                                      });\r\n                                      alert.present(); \r\n                                }\r\n                            })\r\n                               \r\n                        }else{\r\n                            const alert = this.alertCtrl.create({\r\n                                title: 'Oops!',\r\n                                subTitle: 'las contraseñas no coinciden, intenta de nuevo',\r\n                                buttons: ['OK']\r\n                              });\r\n                              alert.present();\r\n                        }     \r\n                    }\r\n\r\n                })\r\n                \r\n            }\r\n            this.noCompanyIdentified(count);        \r\n        }\r\n }\r\n\r\n\r\n\r\n \r\n    sendVerificationCode(userId){\r\n            this.navCtrl.push('VerificationNumberPage', {userId: userId});\r\n    }\r\n\r\n   \r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/signup/signup.ts"],"sourceRoot":""}