{"version":3,"sources":["../../src/pages/confirmpopup/confirmpopup.module.ts","../../src/pages/confirmpopup/confirmpopup.ts"],"names":[],"mappings":"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","file":"19.js","sourcesContent":["\r\nimport { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { ConfirmpopupPage } from './confirmpopup';\r\n \r\n@NgModule({\r\n  declarations: [\r\n    ConfirmpopupPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(ConfirmpopupPage),\r\n  ],\r\n  exports: [\r\n    ConfirmpopupPage\r\n  ]\r\n})\r\nexport class ConfirmpopupPageModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/confirmpopup/confirmpopup.module.ts","import { Component} from '@angular/core';\r\nimport { NavController, ViewController, ModalController, NavParams, ToastController, IonicPage, AlertController} from 'ionic-angular';\r\nimport { AngularFireAuth } from 'angularfire2/auth';\r\n// import { AngularFireDatabase } from 'angularfire2/database';\r\nimport { SignUpService } from '../../services/signup.service';\r\nimport { sendCoordsService } from '../../services/sendCoords.service';\r\n// import { RidetodayPage } from '../ridetoday/ridetoday';\r\n// import { MyridePage } from '../myride/myride';\r\n// import { TabsPage } from '../tabs/tabs';\r\nimport { sendUsersService } from '../../services/sendUsers.service';\r\nimport { geofireService } from '../../services/geofire.services';\r\nimport { instancesService } from '../../services/instances.service';\r\nimport { Subject } from 'rxjs';\r\n\r\n\r\n@IonicPage()\r\n\r\n@Component({\r\n\tselector: 'page-confirmpopup',\r\n\ttemplateUrl: 'confirmpopup.html'\r\n})\r\nexport class ConfirmpopupPage {\r\n  \r\n\r\n  user:any;\r\n  userDriver:any ;\r\n  locationOrigin:any =[];\r\n  locationDestination:any =[];\r\n  userDriverUid=this.AngularFireAuth.auth.currentUser.uid\r\n  accepted: any;\r\n  infoUser:any = {};\r\n  unsubscribe = new Subject;\r\n  pickingUsers:any =  [];\r\n  pickedUpUsers:any = [];\r\n  constructor(public navCtrl: NavController,public sendUsersService: sendUsersService, public SignUpService: SignUpService, public sendCoordsService: sendCoordsService,public modalCtrl: ModalController, private AngularFireAuth: AngularFireAuth, public viewCtrl:ViewController,public navParams: NavParams, public geoFireService: geofireService, public instances: instancesService, public toastCtrl: ToastController, public alertCtrl: AlertController ) {\r\n      //we get the info of the users with navParams\r\n      this.user= this.navParams.get('user') \r\n      console.log(this.user)\r\n  \r\n         //get origin from driver\r\n      this.sendCoordsService.getOrigin(this.userDriverUid).takeUntil(this.unsubscribe)\r\n      .subscribe( origin => {\r\n        this.locationOrigin = origin;\r\n      })\r\n         //get destination from driver\r\n      this.sendCoordsService.getDestination(this.userDriverUid).takeUntil(this.unsubscribe)\r\n        .subscribe( destination => {\r\n          this.locationDestination = destination;\r\n\t\t})\r\n\t\t\r\n\t\tthis.SignUpService.getMyInfoDriver(this.userDriverUid).takeUntil(this.unsubscribe)\r\n\t\t.subscribe(userDriver => {\r\n\t\t\tthis.userDriver = userDriver;\r\n\t\t\tthis.pickingUsers = this.userDriver.trips.pickingUsers;\r\n\t\t\tthis.pickedUpUsers = this.userDriver.trips.pickedUpUsers;\r\n\r\n\t\t});\r\n\t\t\r\n   \r\n    }\r\n\r\n\tacceptUser() {\r\n\tif(this.userDriver.trips.pickingUsers){\r\n\r\n\t\tif(this.userDriver.trips.pickedUpUsers){\r\n\r\n\r\n\t\t\tif(Object.keys(this.pickingUsers).length + Object.keys(this.pickedUpUsers).length >= 4){\r\n\r\n\r\n\t\t\t\tthis.sendUsersService.removeUsersOnListRideTotal(this.userDriverUid);\r\n\t\t\t\t// this.geoFireService.cancelGeoqueryDest();\r\n\t\t\t\t// this.geoFireService.cancelGeoqueryOr();\r\n\t\t\t\tconst alert = this.alertCtrl.create({\r\n\t\t\t\t\ttitle: 'limite de estudiantes permitido',\r\n\t\t\t\t\tsubTitle: 'ya recogiste o aceptaste más de 4 personas. Este es el limite de personas para cada viaje',\r\n\t\t\t\t\tbuttons: ['OK']\r\n\t\t\t\t  });\r\n\t\t\t\t  alert.present();\r\n\r\n\t\t\t\tthis.instances.turnOntripUsersFalse(this.user.userId);\r\n\t\t\t}else{\r\n\r\n\r\n\t\t\t\tconsole.log('before delete')\r\n\t\t\t\t// this.sendUsersService.removeUsersOnListRide(this.userDriverUid, this.user.userId);\r\n\t\t\t\tconsole.log('after delete')\r\n\t\t\t\tthis.sendUsersService.pushPickingUpUsersOnDrivers(this.userDriverUid, this.user.userId, this.user.origin, this.user.destination, this.user.name, this.user.lastname, this.user.phone, this.user.about);\r\n\t\t\t\tthis.sendUsersService.pushDriverOnUsers(this.userDriverUid, this.user.userId, this.locationOrigin, this.locationDestination, this.userDriver.name, this.userDriver.lastname, this.userDriver.phone,this.userDriver.trips.price,this.userDriver.trips.car, this.userDriver.about);\r\n\t\t\t\t\tthis.geoFireService.deleteUserListRide(this.userDriverUid, this.user.userId);\r\n\t\t\t\t\tthis.geoFireService.deleteUserListRide(this.userDriverUid, this.user.userId);\r\n\t\t\r\n\t\t\t\t\tthis.instances.turnOntripUsers(this.user.userId);\r\n\t\t\t//   this.sendUsersService.removeUsersOnListRide(this.userDriverUid, this.user.userId);\r\n\t\t\t  this.instances.turnOntripUsers(this.user.userId);\r\n\t\t\t  this.accepted = true;\r\n\t\t\t  this.dismiss();\r\n\t\t\t\tconst toast = this.toastCtrl.create({\r\n\t\t\t\t\tmessage: `¡Haz aceptado a ${this.user.name} en tu viaje!, Acepta otros compañeros y dirigete a Viajes para encontrar su dirección`,\r\n\t\t\t\t\tduration: 4500,\r\n\t\t\t\t\tposition: 'middle'\r\n\t\t\t\t});\r\n\t\t\t\ttoast.present();\r\n\t\t\t}\r\n\t\t}else if(Object.keys(this.pickingUsers).length >= 4){\r\n\r\n\r\n\t\t\tthis.sendUsersService.removeUsersOnListRideTotal(this.userDriverUid);\r\n\t\t\t\t// this.geoFireService.cancelGeoqueryDest();\r\n\t\t\t\t// this.geoFireService.cancelGeoqueryOr();\r\n\t\t\t\tconst alert = this.alertCtrl.create({\r\n\t\t\t\t\ttitle: 'limite de estudiantes permitido',\r\n\t\t\t\t\tsubTitle: 'ya recogiste o aceptaste más de 4 personas. Este es el limite de personas para cada viaje',\r\n\t\t\t\t\tbuttons: ['OK']\r\n\t\t\t\t  });\r\n\t\t\t\t  alert.present();\r\n\t\t\t\t  this.instances.turnOntripUsersFalse(this.user.userId);\r\n\r\n\t\t\t\r\n\t\t}else{\r\n\t\t\tconsole.log('before delete')\r\n\t\t\t\t// this.sendUsersService.removeUsersOnListRide(this.userDriverUid, this.user.userId);\r\n\t\t\t\tconsole.log('after delete')\r\n\t\t\t\tthis.sendUsersService.pushPickingUpUsersOnDrivers(this.userDriverUid, this.user.userId, this.user.origin, this.user.destination, this.user.name, this.user.lastname, this.user.phone, this.user.about);\r\n\t\t\t\tthis.sendUsersService.pushDriverOnUsers(this.userDriverUid, this.user.userId, this.locationOrigin, this.locationDestination, this.userDriver.name, this.userDriver.lastname, this.userDriver.phone,this.userDriver.trips.price,this.userDriver.trips.car,this.userDriver.about);\r\n\t\t\t\t\tthis.geoFireService.deleteUserListRide(this.userDriverUid, this.user.userId);\r\n\t\t\t\t\tthis.geoFireService.deleteUserListRide(this.userDriverUid, this.user.userId);\r\n\t\t\r\n\t\t\t\t\tthis.instances.turnOntripUsers(this.user.userId);\r\n\t\t\t//   this.sendUsersService.removeUsersOnListRide(this.userDriverUid, this.user.userId);\r\n\t\t\t  this.instances.turnOntripUsers(this.user.userId);\r\n\t\t\t  this.accepted = true;\r\n\t\t\t  this.dismiss();\r\n\t\t\t\tconst toast = this.toastCtrl.create({\r\n\t\t\t\t\tmessage: `¡Haz aceptado a ${this.user.name} en tu viaje!, Acepta otros compañeros y dirigete a Viajes para encontrar su dirección`,\r\n\t\t\t\t\tduration: 4500,\r\n\t\t\t\t\tposition: 'middle'\r\n\t\t\t\t});\r\n\t\t\t\ttoast.present();\r\n\t\t}\r\n\t}else{\r\n\t\tconsole.log('g');\r\n\r\n\t\tconsole.log('before delete')\r\n\t\t\t// this.sendUsersService.removeUsersOnListRide(this.userDriverUid, this.user.userId);\r\n\t\t\tconsole.log('after delete')\r\n\t\t\tthis.sendUsersService.pushPickingUpUsersOnDrivers(this.userDriverUid, this.user.userId, this.user.origin, this.user.destination, this.user.name, this.user.lastname, this.user.phone, this.user.about);\r\n\t\t\tthis.sendUsersService.pushDriverOnUsers(this.userDriverUid, this.user.userId, this.locationOrigin, this.locationDestination, this.userDriver.name, this.userDriver.lastname, this.userDriver.phone,this.userDriver.trips.price,this.userDriver.trips.car, this.userDriver.about);\r\n\t\t\t\tthis.geoFireService.deleteUserListRide(this.userDriverUid, this.user.userId);\r\n\t\t\t\tthis.geoFireService.deleteUserListRide(this.userDriverUid, this.user.userId);\r\n\t\r\n\t\t\t\tthis.instances.turnOntripUsers(this.user.userId);\r\n\t\t//   this.sendUsersService.removeUsersOnListRide(this.userDriverUid, this.user.userId);\r\n\t\t  this.instances.turnOntripUsers(this.user.userId);\r\n\t\t  this.accepted = true;\r\n\t\t  this.dismiss();\r\n\t\t\tconst toast = this.toastCtrl.create({\r\n\t\t\t\tmessage: `¡Haz aceptado a ${this.user.name} en tu viaje!, Acepta otros compañeros y dirigete a Viajes para encontrar su dirección`,\r\n\t\t\t\tduration: 4500,\r\n\t\t\t\tposition: 'middle'\r\n\t\t\t});\r\n\t\t\ttoast.present();\r\n\t}\r\n\r\n }\r\n  \r\n\r\n\tdismiss() {\r\n\t\tconsole.log('deleted on click')\r\n\t\tthis.viewCtrl.dismiss(this.accepted);\r\n\t\tthis.unsubscribe.next();\r\n\t\tthis.unsubscribe.complete();\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/confirmpopup/confirmpopup.ts"],"sourceRoot":""}