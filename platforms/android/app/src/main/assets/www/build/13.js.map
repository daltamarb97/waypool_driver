{"version":3,"sources":["../../src/pages/onTrip/onTrip.module.ts","../../src/pages/onTrip/onTrip.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AACyC;AACO;AACV;AAatC;IAAA;IAA+B,CAAC;IAAnB,gBAAgB;QAX5B,uEAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,2DAAU;aACX;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,2DAAU,CAAC;aACrC;YACD,OAAO,EAAE;gBACP,2DAAU;aACX;SACF,CAAC;OACW,gBAAgB,CAAG;IAAD,uBAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChB4C;AACkB;AAErB;AAClB;AACU;AACsB;AAC5B;AAED;AAEa;AAUpE;IAiBE,oBAAmB,OAAsB,EAAQ,SAA0B,EAAQ,gBAAkC,EAAQ,aAA2B,EAAQ,SAA0B,EAAS,UAAsB,EAAQ,SAAoB,EAAQ,aAA2B,EAAS,qBAA2C,EAAS,WAAwB,EAAQ,IAAY,EAAS,iBAAoC,EAAU,eAAgC;QAAxd,iBAwBC;QAxBkB,YAAO,GAAP,OAAO,CAAe;QAAQ,cAAS,GAAT,SAAS,CAAiB;QAAQ,qBAAgB,GAAhB,gBAAgB,CAAkB;QAAQ,kBAAa,GAAb,aAAa,CAAc;QAAQ,cAAS,GAAT,SAAS,CAAiB;QAAS,eAAU,GAAV,UAAU,CAAY;QAAQ,cAAS,GAAT,SAAS,CAAW;QAAQ,kBAAa,GAAb,aAAa,CAAc;QAAS,0BAAqB,GAArB,qBAAqB,CAAsB;QAAS,gBAAW,GAAX,WAAW,CAAa;QAAQ,SAAI,GAAJ,IAAI,CAAQ;QAAS,sBAAiB,GAAjB,iBAAiB,CAAmB;QAAU,oBAAe,GAAf,eAAe,CAAiB;QAZxd,sBAAiB,GAAQ,IAAI,CAAC;QAC9B,sBAAiB,GAAQ,IAAI,CAAC;QAC9B,WAAM,GAAQ,IAAI,CAAC;QAMnB,kBAAa,GAAO,EAAE,CAAC;QAEvB,YAAO,GAAC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC;QAIhD,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;QAClB,6CAA6C;QAG7C,IAAI,CAAC,iBAAiB,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,iBAAiB,EAAE,CAAC;QAC7D,IAAI,CAAC,iBAAiB,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC;YAC1D,eAAe,EAAE,IAAI;SACxB,CAAC,CAAC;QACD,IAAI,CAAC,MAAM,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC;QAC7C,IAAI,CAAC,QAAQ,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC;QAC3C,IAAI,CAAC,gBAAgB,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC;aACjD,SAAS,CAAE,cAAI;YAEd,KAAI,CAAC,aAAa,GAAG,IAAI,CAAC;YAC1B,OAAO,CAAC,GAAG,CAAC,KAAI,CAAC,aAAa,CAAC,CAAC;QAElC,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,aAAa,CAAC,eAAe,CAAC,IAAI,CAAC,OAAO,CAAC;aACjD,SAAS,CAAC,oBAAU;YACpB,KAAI,CAAC,MAAM,GAAG,UAAU,CAAC;YACzB,OAAO,CAAC,GAAG,CAAC,KAAI,CAAC,MAAM,CAAC,CAAC;QACxB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,mCAAc,GAAd;QAAA,iBAQC;QAPC,IAAI,CAAC,iBAAiB,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC;aAClD,SAAS,CAAE,qBAAW;YACrB,KAAI,CAAC,iBAAiB,GAAG,WAAW,CAAC;YACrC,OAAO,CAAC,GAAG,CAAC,KAAI,CAAC,iBAAiB,CAAC;YACnC,KAAI,CAAC,OAAO,EAAE,CAAC;QACjB,CAAC,CAAC,CAAC;IAEL,CAAC;IAED,4BAAO,GAAP;QAED,6FAA6F;QAF5F,iBAqDE;QAjDA,IAAI,CAAC,WAAW,CAAC,kBAAkB,CAAC,EAAC,kBAAkB,EAAE,IAAI,EAAC,CAAC,CAAC,IAAI,CAAC,UAAC,QAAQ;YAE5E,IAAI,MAAM,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,EAAE,QAAQ,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;YAEzF,IAAI,UAAU,GAAG;gBACb,MAAM,EAAE,MAAM;gBACd,IAAI,EAAE,EAAE;gBACR,SAAS,EAAE,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO;gBAEtC,WAAW,EAAE,KAAK;gBAClB,cAAc,EAAE,KAAK;gBACrB,YAAY,EAAE,KAAK;gBACnB,iBAAiB,EAAE,IAAI;gBACvB,aAAa,EAAE,KAAK;gBACpB,iBAAiB,EAAE,KAAK;gBACxB,MAAM,EAAE;oBACN;wBACE,WAAW,EAAE,KAAK;wBAClB,WAAW,EAAE,aAAa;wBAC1B,OAAO,EAAE;4BACP;gCACE,UAAU,EAAE,KAAK;6BAClB;yBACF;qBACF;iBACF;aAEJ;YAED,KAAI,CAAC,QAAQ,GAAG,EAAC,GAAG,EAAE,QAAQ,CAAC,MAAM,CAAC,QAAQ,EAAG,GAAG,EAAE,QAAQ,CAAC,MAAM,CAAC,SAAS,EAAC,CAAC;YACrF,kCAAkC;YAChC,KAAI,CAAC,GAAG,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,KAAI,CAAC,UAAU,CAAC,aAAa,EAAE,UAAU,CAAC,CAAC;YAC1E,KAAI,CAAC,aAAa,CAAC,MAAM,CAAC;YAC1B,KAAI,CAAC,cAAc,CAAC,KAAI,CAAC,iBAAiB,CAAC;YAC3C,IAAI,MAAM,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;gBAClC,GAAG,EAAE,KAAI,CAAC,GAAG;gBACb,SAAS,EAAE,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI;gBACrC,QAAQ,EAAE,MAAM;aAEjB,CAAC,CAAC;YACH,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAC1B,CAAC,EAAC,UAAC,GAAG;YACN,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAClB,CAAC,CAAC,CAAC;QACH,mDAAmD;IAKrD,CAAC;IAGA,wCAAwC;IAC1C,kDAAkD;IAClD,gCAAgC;IAChC,0BAA0B;IAC1B,8FAA8F;IAC9F,6CAA6C;IAC7C,qCAAqC;IAErC,oFAAoF;IAEpF,yCAAyC;IACzC,uDAAuD;IACvD,SAAS;IAER,mCAAc,GAAd,UAAe,iBAAiB;QAAhC,iBAkBA;QAjBC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAC,SAAS,EAAC,IAAI,CAAC,SAAS,CAAC,iBAAiB,CAAC,EAAC,EAAE,UAAC,OAAO,EAAE,MAAM;YACnF,EAAE,CAAC,CAAC,MAAM,IAAI,IAAI,CAAC,CAAC,CAAC;gBAGnB,IAAI,MAAM,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;oBAClC,GAAG,EAAE,KAAI,CAAC,GAAG;oBACb,QAAQ,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,QAAQ;iBACvC,CAAC,CAAC;gBAEH,KAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,KAAI,CAAC,GAAG,CAAC,CAAC;gBACxC,KAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC;YACnD,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,KAAK,CAAC,uDAAuD,GAAG,MAAM,CAAC,CAAC;YAC1E,CAAC;QAEH,CAAC,CAAC,CAAC;IAEL,CAAC;IACD,kCAAa,GAAb,UAAc,MAAM;QAApB,iBAeC;QAbC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAC,UAAU,EAAE,MAAM,EAAC,EAAE,UAAC,OAAO,EAAE,MAAM;YAC1D,EAAE,CAAC,CAAC,MAAM,KAAK,IAAI,CAAC,CAAC,CAAC;gBACpB,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBACd,KAAI,CAAC,aAAa,GAAE,OAAO,CAAC,CAAC,CAAC,CAAC,iBAAiB;gBACnD,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACP,KAAK,CAAC,kBAAkB,CAAC,CAAC;gBAC3B,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,KAAK,CAAC,0BAA0B,GAAG,MAAM,CAAC,CAAC;YAC7C,CAAC;QAGH,CAAC,CAAC,CAAC;IACL,CAAC;IACD,mCAAc,GAAd,UAAe,iBAAiB;QAC9B,4FAA4F;QAD9F,iBAyBC;QAtBC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAIlC,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAEhC,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC;YAC5B,MAAM,EAAE,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC;YACnE,WAAW,EAAE,iBAAiB;YAC9B,UAAU,EAAE,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO;YAC1C,UAAU,EAAE,IAAI;SACjB,EAAE,UAAC,QAAQ,EAAE,MAAM;YAClB,QAAQ;YACR,EAAE,EAAC,MAAM,KAAK,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,EAAE,CAAC,CAAC,CAAC;gBAC9C,KAAI,CAAC,iBAAiB,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;YACjD,CAAC;YAAA,IAAI,EAAC;gBACJ,KAAK,CAAC,uCAAuC,GAAG,MAAM,CAAC,CAAC;YAC1D,CAAC;QAEH,CAAC,CAAC,CAAC;IAGL,CAAC;IAIC,8BAAS,GAAT,UAAU,QAAQ;QAChB,IAAI,MAAM,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;YAClC,QAAQ,EAAE,QAAQ;YAClB,GAAG,EAAE,IAAI,CAAC,GAAG;SAEd,CAAC,CAAC;QACH,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IAC5B,CAAC;IAED,gCAAW,GAAX,UAAY,GAAG;QACb,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;YAC7C,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QAC9B,CAAC;IACH,CAAC;IAED,iCAAY,GAAZ;QACE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;IACzB,CAAC;IAED,kCAAa,GAAb;QACE,IAAI,CAAC,YAAY,EAAE,CAAC;QACpB,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;IACpB,CAAC;IAGD,4BAAO,GAAP;QAAA,iBA4BO;QA1BL,wBAAwB;QACxB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,cAAc,EAAC,EAAC,IAAI,EAAC,IAAI,CAAC,MAAM,EAAC,CAAC;QAEpD,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,cAAI;YAC/B,2CAA2C;YAC3C,KAAI,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,IAAI,CAAC,MAAM,EAAC,IAAI,CAAC,CAAC;YAC1D,KAAI,CAAC,iBAAiB,CAAC,uBAAuB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAC5D,KAAI,CAAC,iBAAiB,CAAC,wBAAwB,CAAC,IAAI,CAAC,MAAM,CAAC;YAC3D,KAAI,CAAC,iBAAiB,CAAC,yBAAyB,CAAC,IAAI,CAAC,MAAM,CAAC;YAC7D,KAAI,CAAC,iBAAiB,CAAC,yBAAyB,CAAC,IAAI,CAAC,MAAM,CAAC;YAE7D,KAAI,CAAC,iBAAiB,CAAC,yBAAyB,CAAC,IAAI,CAAC,MAAM,CAAC;QAG7D,CAAC,CAAC;QACF,4CAA4C;QAC7C,IAAI,CAAC,iBAAiB,CAAC,mBAAmB,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QAC9D,IAAI,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,IAAI,CAAC,OAAO,EAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QACzE,2CAA2C;QAC5C,IAAI,CAAC,iBAAiB,CAAC,yBAAyB,CAAC,IAAI,CAAC,OAAO,CAAC;QAC9D,IAAI,CAAC,iBAAiB,CAAC,0BAA0B,CAAC,IAAI,CAAC,OAAO,CAAC;QAI/D,IAAI,CAAC,YAAY,CAAC,iBAAiB,EAAE,yEAAyE,EAAC,IAAI,CAAC;IAEhH,CAAC;IAEP,iCAAY,GAAZ,UAAa,OAAc,EAAC,QAAQ,EAAC,QAAe;QAClD,IAAM,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YAClC,OAAO,EAAE,OAAO;YAChB,QAAQ,EAAE,QAAQ;YAClB,QAAQ,EAAC,QAAQ;SAClB,CAAC,CAAC;QACH,KAAK,CAAC,OAAO,EAAE,CAAC;IAClB,CAAC;IACD,iCAAY,GAAZ,UAAa,KAAY,EAAC,IAAW,EAAC,MAAa;QACjD,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YAChC,KAAK,EAAE,KAAK;YACZ,QAAQ,EAAE,IAAI;YACd,OAAO,EAAE,CAAC,MAAM,CAAC;SAClB,CAAC,CAAC;QACH,KAAK,CAAC,OAAO,EAAE,CAAC;IAClB,CAAC;IACD,yBAAI,GAAJ;QACE,IAAM,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YAClC,OAAO,EAAE,kMAAkM;YAC3M,eAAe,EAAC,IAAI;YACpB,eAAe,EAAE,IAAI;YACrB,QAAQ,EAAC,KAAK;SACV,CAAC,CAAC;QACR,KAAK,CAAC,OAAO,EAAE,CAAC;IAClB,CAAC;IAzQe;QAAjB,yEAAS,CAAC,KAAK,CAAC;kCAAa,iEAAU;kDAAC;IAD9B,UAAU;QAJtB,wEAAS,CAAC;YACT,QAAQ,EAAE,aAAa;WACG;SAC3B,CAAC;mBAkBwd;OAjB7c,UAAU,CA2QpB;IAAD,CAAC;AAAA;SA3QU,UAAU,e","file":"13.js","sourcesContent":["\nimport { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { OnTripPage } from './onTrip';\n \n@NgModule({\n  declarations: [\n    OnTripPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(OnTripPage),\n  ],\n  exports: [\n    OnTripPage\n  ]\n})\nexport class OnTripPageModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/onTrip/onTrip.module.ts","import { Component, NgZone, ElementRef, ViewChild } from '@angular/core';\nimport { NavController, NavParams, AlertController, ToastController, IonicPage } from 'ionic-angular';\n\nimport { sendCoordsService } from '../../services/sendCoords.service';\nimport { AngularFireAuth } from 'angularfire2/auth';\nimport { SignUpService } from '../../services/signup.service';\nimport { authenticationService } from '../../services/driverauthentication.service';\nimport { Geolocation } from '@ionic-native/geolocation';\nimport * as firebase from 'Firebase';\nimport { CallNumber } from '@ionic-native/call-number';\nimport { RatetripPage } from '../ratetrip/ratetrip';\nimport { sendUsersService } from '../../services/sendUsers.service';\n\n\ndeclare var google; \n@IonicPage()\n\n@Component({\n  selector: 'page-ontrip',\n  templateUrl: 'onTrip.html'\n})\nexport class OnTripPage {\n  @ViewChild('map') mapElement: ElementRef;\n  map: any;\n  markers:any;\n  driver:any;\n  directionsService: any = null;\n  directionsDisplay: any = null;\n  bounds: any = null;\n  myLatLng:any;\n  destinationOnTrip:any;\n  geocoder:any;\n  addressOrigin:any;\n  updatelocation:any;\n  pickedUpUsers:any = [];\n\n  useruid=this.AngularFireAuth.auth.currentUser.uid;\n\n  constructor(public navCtrl: NavController,public alertCtrl: AlertController,public sendUsersService: sendUsersService,public SignupService:SignUpService,public toastCtrl: ToastController,private callNumber: CallNumber,public navParams: NavParams,public SignUpService:SignUpService,private authenticationService:authenticationService, public geolocation: Geolocation,public zone: NgZone, public sendCoordsService: sendCoordsService, private AngularFireAuth: AngularFireAuth) {\n    \n    this.markers = [];\n    //we get the info of the users with navParams\n    \n  \n    this.directionsService = new google.maps.DirectionsService();\n    this.directionsDisplay = new google.maps.DirectionsRenderer({\n      suppressMarkers: true,\n  });\n    this.bounds = new google.maps.LatLngBounds();\n    this.geocoder = new google.maps.Geocoder();\n    this.sendUsersService.getPickUpUsers(this.useruid)\n    .subscribe( user => {\n    \n      this.pickedUpUsers = user;\n      console.log(this.pickedUpUsers);\n      \n    });\n    this.SignUpService.getMyInfoDriver(this.useruid)\n\t\t.subscribe(userDriver => {\n\t\t\tthis.driver = userDriver;\n\t\t\tconsole.log(this.driver);\n    });    \n  }\n  \n  ionViewDidLoad(){ \n    this.sendCoordsService.getDestination(this.useruid)\n    .subscribe( destination => {\n      this.destinationOnTrip = destination;\n      console.log(this.destinationOnTrip)\n      this.loadMap();\n    });\n   \n  }\n \n  loadMap(){\n\n // this gets current position and set the camera of the map and put a marker in your location\n    \n    this.geolocation.getCurrentPosition({enableHighAccuracy: true}).then((position) => {\n\n      let latLng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);\n \n      let mapOptions = {\n          center: latLng,\n          zoom: 17,\n          mapTypeId: google.maps.MapTypeId.ROADMAP,\n          \n            zoomControl: false,\n            mapTypeControl: false,\n            scaleControl: false,\n            streetViewControl: true,\n            rotateControl: false,\n            fullscreenControl: false, \n            styles: [\n              {\n                featureType: 'poi',\n                elementType: 'labels.icon',\n                stylers: [\n                  {\n                    visibility: 'off'\n                  }\n                ]\n              }\n            ]\n          \n        }\n\n        this.myLatLng = {lat: position.coords.latitude , lng: position.coords.longitude};\n    //creates the map and give options\n      this.map = new google.maps.Map(this.mapElement.nativeElement, mapOptions);\n      this.geocodeLatLng(latLng)\n      this.geocodeAddress(this.destinationOnTrip)\n      let marker = new google.maps.Marker({\n        map: this.map,\n        animation: google.maps.Animation.DROP,\n        position: latLng,\n        \n      });\n      this.markers.push(marker);   \n      },(err) => {\n      console.log(err);    \n     });\n     //transform the position of the user into an adress\n    \n     \n      \n    \n   }\n    \n\n    // watch: track the position of the user\n  //   let watch = this.geolocation.watchPosition();\n  //   watch.subscribe((data) => {\n  //   this.deleteMarkers();\n  //   this.updatelocation = new google.maps.LatLng(data.coords.latitude,data.coords.longitude);\n  //   this.geocodeLatLng(this.updatelocation);\n  //   console.log(this.updatelocation)\n    \n  //   this.sendCoordsService.updateGeolocationOrigin(this.useruid,this.addressOrigin)\n    \n  //   this.addMarker(this.updatelocation);\n  //   this.setMapOnAll(this.map); //nose de esta funcion\n  // });   \n  \n   geocodeAddress(destinationDriver) {\n    this.geocoder.geocode({'address':JSON.stringify(destinationDriver)}, (results, status) =>  {\n      if (status == 'OK') {\n     \n        \n        var marker = new google.maps.Marker({\n          map: this.map,\n          position: results[0].geometry.location\n        });\n      \n        this.directionsDisplay.setMap(this.map);\n        this.calculateRoute(results[0].geometry.location)\n      } else {\n        alert('Geocode was not successful for the following reason: ' + status);\n      }\n      \n    });\n    \n  }\n  geocodeLatLng(latLng) {\n\n    this.geocoder.geocode({'location': latLng}, (results, status) => {\n      if (status === 'OK') {\n        if (results[0]) {\n           this.addressOrigin= results[0].formatted_address\n        } else {\n         alert('No results found');\n        }\n      } else {\n        alert('Geocoder failed due to: ' + status);\n      }\n                  \n  \n    });\n  } \n  calculateRoute(destinationOnTrip){\n    //tutorial ngclassroom https://blog.ng-classroom.com/blog/ionic2/directions-google-js-ionic/\n\n    this.bounds.extend(this.myLatLng);\n\n    \n  \n    this.map.fitBounds(this.bounds);\n    \n    this.directionsService.route({\n     origin: new google.maps.LatLng(this.myLatLng.lat, this.myLatLng.lng),\n      destination: destinationOnTrip,\n      travelMode: google.maps.TravelMode.DRIVING,\n      avoidTolls: true\n    }, (response, status)=> {\n      //render\n      if(status === google.maps.DirectionsStatus.OK) {\n        this.directionsDisplay.setDirections(response);\n      }else{\n        alert('Could not display directions due to: ' + status);\n      }\n      \n    });  \n    \n    \n  }\n\n\n   \n    addMarker(location) {\n      let marker = new google.maps.Marker({\n        position: location,\n        map: this.map,\n        // icon: image\n      });\n      this.markers.push(marker);\n    }\n    \n    setMapOnAll(map) {\n      for (var i = 0; i < this.markers.length; i++) {\n        this.markers[i].setMap(map);\n      }\n    }\n    \n    clearMarkers() {\n      this.setMapOnAll(null);\n    }\n    \n    deleteMarkers() {\n      this.clearMarkers();\n      this.markers = [];\n    }\n\n    \n    endTrip(){\n\n      //let user rate the trip\n      this.navCtrl.push('RatetripPage',{user:this.driver})\n\n      this.pickedUpUsers.forEach(user => {\n      // save trip in every record of every users\n      this.sendCoordsService.recordTripOnUser(user.userId,user);  \n      this.sendCoordsService.endTripUserPickingUsers(user.userId);\n      this.sendCoordsService.endTripUserPickedUpUsers(user.userId)\n       this.sendCoordsService.endTripUserOnTripInstance(user.userId)\n       this.sendCoordsService.endTripUserPickupInstance(user.userId)\n\n       this.sendCoordsService.endTripUserDriverListRide(user.userId)\n\n\n       })\n       //Save trip into RecordTrip on User & Driver\n      this.sendCoordsService.recordTripOnWaypool(this.driver.trips);\n      this.sendCoordsService.recordTripOnDriver(this.useruid,this.driver.trips);        \n       //End trip into RecordTrip on User & Driver\n      this.sendCoordsService.endTripDriverPickingUsers(this.useruid)\n      this.sendCoordsService.endTripDriverPickedUpUsers(this.useruid)\n\n      \n      \n      this.presentAlert('Viaje Terminado', '¡No olvides seguirnos en Instagram y Twitter para obtener tips y bonos!','OK')\n    \n          }\n   \n    presentToast(message:string,duration,position:string) {     \n      const toast = this.toastCtrl.create({\n        message: message,\n        duration: duration,\n        position:position\n      });\n      toast.present();\n    }\n    presentAlert(title:string,text:string,button:string) {\n      let alert = this.alertCtrl.create({\n        title: title,\n        subTitle: text,\n        buttons: [button]\n      });\n      alert.present();\n    }\n    help(){\n      const toast = this.toastCtrl.create({\n        message: 'En esta página podrás dirigirte hacia la universidad y ver en el mapa el camino que puedes tomar, cuando hayas llegado presiona el botón finalizar viaje y cuentanos tu experiencia con Waypool.',\n        showCloseButton:true,\n        closeButtonText: 'OK',\n        position:'top'\n           });\n      toast.present();\n    }\n  }\n    \n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/onTrip/onTrip.ts"],"sourceRoot":""}