{"version":3,"sources":["../../src/pages/confirmpopup/confirmpopup.module.ts","../../src/pages/confirmpopup/confirmpopup.ts"],"names":[],"mappings":"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","file":"18.js","sourcesContent":["\nimport { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ConfirmpopupPage } from './confirmpopup';\n \n@NgModule({\n  declarations: [\n    ConfirmpopupPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ConfirmpopupPage),\n  ],\n  exports: [\n    ConfirmpopupPage\n  ]\n})\nexport class ConfirmpopupPageModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/confirmpopup/confirmpopup.module.ts","import { Component} from '@angular/core';\nimport { NavController, ViewController, ModalController, NavParams, ToastController, IonicPage} from 'ionic-angular';\nimport { AngularFireAuth } from 'angularfire2/auth';\n// import { AngularFireDatabase } from 'angularfire2/database';\nimport { SignUpService } from '../../services/signup.service';\nimport { sendCoordsService } from '../../services/sendCoords.service';\n// import { RidetodayPage } from '../ridetoday/ridetoday';\n// import { MyridePage } from '../myride/myride';\n// import { TabsPage } from '../tabs/tabs';\nimport { sendUsersService } from '../../services/sendUsers.service';\nimport { geofireService } from '../../services/geofire.services';\nimport { instancesService } from '../../services/instances.service';\nimport { ListridePage } from '../listride/listride';\nimport { Subject } from 'rxjs';\n\n\n@IonicPage()\n\n@Component({\n\tselector: 'page-confirmpopup',\n\ttemplateUrl: 'confirmpopup.html'\n})\nexport class ConfirmpopupPage {\n  \n\n  user:any;\n  userDriver:any ;\n  locationOrigin:any =[];\n  locationDestination:any =[];\n  userDriverUid=this.AngularFireAuth.auth.currentUser.uid\n  accepted: any;\n  infoUser:any = {};\n  unsubscribe = new Subject;\n  constructor(public navCtrl: NavController,public sendUsersService: sendUsersService, public SignUpService: SignUpService, public sendCoordsService: sendCoordsService,public modalCtrl: ModalController, private AngularFireAuth: AngularFireAuth, public viewCtrl:ViewController,public navParams: NavParams, public geoFireService: geofireService, public instances: instancesService, public toastCtrl: ToastController ) {\n      //we get the info of the users with navParams\n      this.user= this.navParams.get('user') \n      console.log(this.user)\n  \n         //get origin from driver\n      this.sendCoordsService.getOrigin(this.userDriverUid).takeUntil(this.unsubscribe)\n      .subscribe( origin => {\n        this.locationOrigin = origin;\n      })\n         //get destination from driver\n      this.sendCoordsService.getDestination(this.userDriverUid).takeUntil(this.unsubscribe)\n        .subscribe( destination => {\n          this.locationDestination = destination;\n\t\t})\n\t\t\n\t\tthis.SignUpService.getMyInfoDriver(this.userDriverUid).takeUntil(this.unsubscribe)\n\t\t.subscribe(userDriver => {\n\t\t\tthis.userDriver = userDriver;\n\t\t\tconsole.log(this.userDriver);\n\t\t});\n\t\t\n\t\tconsole.log('a')\n   \n    }\n\n\tacceptUser() {\n\t\t//REVISAR\n\t\t// setTimeout(()=>{\n\t\t// \tthis.sendUsersService.removeUsersOnListRide(this.userDriverUid, this.user.userId);\n\n\t\t// }, 600)\n\t\t\n\t\t// setTimeout(()=>{\n\t\t// \tthis.sendUsersService.removeUsersOnListRide(this.userDriverUid, this.user.userId);\n\n\t\t// }, 1100)\n\t\tconsole.log('before delete')\n\t\tthis.sendUsersService.removeUsersOnListRide(this.userDriverUid, this.user.userId);\n\t\tconsole.log('after delete')\n\t\tthis.sendUsersService.pushPickingUpUsersOnDrivers(this.userDriverUid, this.user.userId, this.user.origin, this.user.destination, this.user.name, this.user.lastname, this.user.phone);\n\t\tthis.sendUsersService.pushDriverOnUsers(this.userDriverUid, this.user.userId, this.locationOrigin, this.locationDestination, this.userDriver.name, this.userDriver.lastname, this.userDriver.phone,this.userDriver.trips.price,this.userDriver.trips.car);\n\t\t\tthis.geoFireService.deleteUserListRide(this.userDriverUid, this.user.userId);\n\t\t\tthis.geoFireService.deleteUserListRide(this.userDriverUid, this.user.userId);\n\n\t\t\tthis.instances.turnOntripUsers(this.user.userId);\n\t//   this.sendUsersService.removeUsersOnListRide(this.userDriverUid, this.user.userId);\n\t  this.instances.turnOntripUsers(this.user.userId);\n\t  this.accepted = true;\n\t  this.dismiss();\n\t\tconst toast = this.toastCtrl.create({\n\t\t\tmessage: `¡Haz aceptado a ${this.user.name} en tu viaje!, Acepta otros compañeros y dirigete a Viajes para encontrar su dirección`,\n\t\t\tduration: 4500,\n\t\t\tposition: 'middle'\n\t\t});\n\t\ttoast.present();\n\n      }\n  \n\n\tdismiss() {\n\t\tconsole.log('deleted on click')\n\t\tthis.viewCtrl.dismiss(this.accepted);\n\t\tthis.unsubscribe.next();\n\t\tthis.unsubscribe.complete();\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/confirmpopup/confirmpopup.ts"],"sourceRoot":""}